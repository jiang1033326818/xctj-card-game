<!DOCTYPE html>
<html>
<head>
  <title>超级简单测试</title>
  <style>
    body { font-family: sans-serif; margin: 20px; }
    button { margin: 5px; padding: 5px 10px; }
    pre { background: #f0f0f0; padding: 10px; border-radius: 5px; }
  </style>
</head>
<body>
  <h1>超级简单测试</h1>
  
  <button onclick="testLogin()">测试登录</button>
  
  <h2>结果:</h2>
  <pre id="result">点击按钮开始测试...</pre>
  
  <script>
    // 最简单的登录测试
    function testLogin() {
      document.getElementById('result').textContent = '正在测试登录...';
      
      var xhr = new XMLHttpRequest();
      xhr.open('POST', '/api/super-simple-login', true);
      
      xhr.onload = function() {
        document.getElementById('result').textContent = 
          'Status: ' + xhr.status + '\n' +
          'Response: ' + xhr.responseText;
          
        // 如果成功，保存token
        if (xhr.status === 200) {
          try {
            var response = JSON.parse(xhr.responseText);
            if (response.token) {
              localStorage.setItem('token', response.token);
              if (response.user) {
                localStorage.setItem('user', JSON.stringify(response.user));
              }
              document.getElementById('result').textContent += '\n\nToken已保存到localStorage';
            }
          } catch (e) {
            document.getElementById('result').textContent += '\n\n解析响应失败: ' + e.message;
          }
        }
      };
      
      xhr.onerror = function() {
        document.getElementById('result').textContent = '请求失败';
      };
      
      xhr.send();
    }
  </script>
</body>
</html>